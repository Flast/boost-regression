<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Running Regression Reports</title>
</head>

<body>
  <h1><img src="../../../boost.png" alt="boost.png (6897 bytes)" align=
  "center" width="277" height="86" /> Running Regression Test Reports</h1>

  <h2>Introduction</h2>
  <p>This page describes how to generate the
  <a href="http://beta.boost.org/development/tests/trunk/developer/summary.html">
  Regression Test Reports</a>. It is of interest primarily to people 
  authorized by the release managers to run the reports.</p>
  <h2>Prerequisites</h2>
  <ul>
    <li>A public ssh key.</li>
    <li><b>Linux</b>. In theory it should be possible to run the run the reports 
    on most modern operating system, including OS X and Windows (under <code>
    bash</code>), but all testing and current use has been on Linux. Works fine 
    in a Linux VirtualBox virtual machine running on a Windows host.</li>
    <li><b>Git</b> installed.</li>
    <li>A C++ compiler installed.</li>
  </ul>
  <h2>Initial setup</h2>
  <p>Send your public ssh key to Rene Rivera.</p>
  <p>Run once only:</p>
  <blockquote>
    <pre>cd ~                   # or some other directory of your choice
mkdir boost-reports    # or some other name of your choice
cd boost-reports
mkdir develop
mkdir master            
git clone --recursive git@github.com:boostorg/boost.git boost
cd boost
./bootstrap.sh
git checkout develop   # we use the branch develop tools/regression
git pull
# Only tools/regression need to be on develop, so no submodule checkout here</pre>
  </blockquote>
  <h2>Build report generation program <code>boost_report</code></h2>
  <p>This only has to be done when there is a change to the report generation 
  program.</p>
  <blockquote>
    <pre>pushd ~/boost-reports/boost
git pull
pushd tools/regression/build
../../../b2 boost_report
# find location of exectuable, then:
mv bin/gcc-4.8/release/boost_report ~/boost/boost-reports # see todo below</pre>
</blockquote>
<p>Issues building boost_report.</p>
<blockquote>
  <pre>RHEL release 6.3 (Santiago): there's no system installed libbz2.a 
so you'll get build errors linking boost_report.  The static bz2 dependency 
comes from tools/regression/build/Jamroot.jam and can be fixed by removing 
the static link requirement.  Change this line:

    /boost//iostreams/&lt;link&gt;static

to this

    /boost//iostreams

in the boost_report target and build.
</blockquote>

  </blockquote>
  <h2>Run reports</h2>
  <p>This step performs the following actions:</p>
  <ul>
    <li>Updates its internal procedures from the git public repository.</li>
    <li>Downloads current result zip files from an ftp server.</li>
    <li>Generates the HTML reports. (Now using a C++ program that is much faster 
    than the old XSLT process.)</li>
    <li>Uploads a zip file containing the reports to a web server.</li>
  </ul>
  <p>To run:</p>
  <blockquote>
    <pre>cd ~/boost/boost-reports/boost
git pull
cd ..
boost/tools/regression/xsl_reports/build_results.sh develop &amp;&gt;develop.log
boost/tools/regression/xsl_reports/build_results.sh master &amp;&gt;master.log</pre>
  </blockquote>

<p>The log files are handy for debugging problems. You can put some or all of 
this in a little bash script if you prefer. For example:</p>  
  
  <blockquote>
    <pre>time boost/tools/regression/xsl_reports/build_results.sh \
    ${1'usually develop or master'} 2&gt;&amp;1 | tee ${1}.log</pre>
  </blockquote>
  <h2>To Do</h2>
  <ul>
    <li>build_results.sh should take care of updating boost_report if needed.</li>
    <li>Avoid the clone --recursive; just install the core libraries (for some 
    definition of core libraries).</li>
    <li>Add install options to tools/regression/build/Jamroot.jam? Or at least 
    boost_report</li>
  </ul>
  <h2>Acknowledgements</h2>
  <p>Thanks to Tom Kent, Steven Watanabe, and Rene Rivera for illuminating various dark corners of how 
  reporting works.</span></p>
  <hr>

  <p><font size="2">Revised
  <!--webbot bot="Timestamp" S-Type="EDITED" S-Format="%d %B %Y" startspan -->17 January 2014<!--webbot bot="Timestamp" endspan i-checksum="32403" --></font></p>

  <p><font size="2">Copyright Beman Dawes 2014.</font></p>

  <p><font size="2">Distributed under the 
  <a href="http://www.boost.org/LICENSE_1_0.txt">Boost Software License, Version 1.0</a>.</font></p>
  <p>&nbsp;</p>

</body>

</html>
